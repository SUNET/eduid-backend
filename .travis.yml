language: python
python:
  - "3.7"
services:
  - docker
env:
  - NEO4J_VERSION=4.0-enterprise
before_install:
  - docker pull docker.sunet.se/eduid/mongodb:latest
  - docker pull docker.sunet.se/library/etcd:v3.3.12
  - docker pull neo4j:$NEO4J_VERSION
# command to install dependencies
install:
  - pip install -U setuptools wheel mypy
  - pip install --index-url https://pypi.sunet.se -r test_requirements.txt
# command to run tests
script:
  - pip freeze
  - make test
  - make typecheck
