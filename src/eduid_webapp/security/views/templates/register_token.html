<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register U2F Token</title>
    <link rel="stylesheet" type="text/css" href="{{ static_url_for('css/bootstrap-3.2.0.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url_for('css/screen.css') }}">
</head>
<body>

<div class="container">
    <h3>Register U2F Token</h3>
    {% if success %}
        <div id="success">
            <div class="center-block">
                <p>Token successfully registered</p>
                <a href="/">Go to dashboard</a>
            </div>
        </div>
    {% else %}
        <div id="no-data" class="collapse">
            <div class="center-block">
                <p>Error: Got no data from the backend</p>
                <a href="javascript:history.back()">Back</a>
            </div>
        </div>
            <div id="u2f-error" class="collapse">
            <div class="center-block">
                <p id="u2f-error-message"></p>
                <a href="javascript:history.back()">Back</a>
            </div>
        </div>

        <div id="promptModal" class="modal fade" tabindex="-1" role="dialog">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">U2F action required</h4>
              </div>
              <div class="modal-body">
                  <p>Please push the button on your Security Key to register</p>
              </div>
              <div class="modal-footer">
                <a class="btn btn-default" href="javascript:history.back()">Abort</a>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <form method="POST" action="register-token" id="u2f-register-form">
            <!-- <input type="hidden" name="csrf_token" id="csrf_token"/>
            <input type="hidden" name="token_response" id="token_response"/> -->
            <input title="csrf_token" type="text" name="csrf_token" id="csrf_token"/>
            <input title="token_response" type="text" name="token_response" id="token_response"/>
            <button type="submit">test</button>
        </form>

        <span class="dataholder" id="u2f-data" data-u2fdata='{{ data_for_client }}'></span>
    {% endif %}
</div>
<script type="text/javascript" src="{{ static_url_for('/js/libs/jquery-2.0.3.min.js') }}"></script>
<script type="text/javascript" src="{{ static_url_for('/js/libs/bootstrap-3.2.0.min.js') }}"></script>
<script type="text/javascript" src="{{ static_url_for('/js/u2f-api.js') }}"></script>
<script type="text/javascript" src="{{ static_url_for('/js/security-register-u2f-token.js') }}"></script>
</body>
</html>